(()=>{"use strict";var e={d:(n,t)=>{for(var r in t)e.o(t,r)&&!e.o(n,r)&&Object.defineProperty(n,r,{enumerable:!0,get:t[r]})},o:(e,n)=>Object.prototype.hasOwnProperty.call(e,n),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},n={};function t(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}e.r(n),e.d(n,{checkQueue:()=>a});var r=function e(n){return new Promise((function(r){return n.createReader().readEntries((function(n){return Promise.all(n.filter((function(e){return"."!==e.name[0]})).map((function(n){return n.isDirectory?e(n):new Promise((function(e){return n.file(e)}))}))).then((function(e){var n,r;return(n=[]).concat.apply(n,function(e){if(Array.isArray(e))return t(e)}(r=e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(r)||function(e,n){if(e){if("string"==typeof e)return t(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?t(e,n):void 0}}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())})).then(r)}))}))},o=function e(n,t){(function(e){return r(e).then((function(e){return e.map((function(e){return e.name+e.lastModifiedDate})).join()}))})(n).then((function(r){t&&t!==r?window.chrome.tabs.query({active:!0,currentWindow:!0},(function(e){e[0]&&window.chrome.tabs.reload(e[0].id),window.chrome.runtime.reload()})):setTimeout((function(){return e(n,r)}),1e3)}))};window.chrome.management.getSelf((function(e){"development"===e.installType&&window.chrome.runtime.getPackageDirectoryEntry((function(e){return o(e)}))}));var i="action_message_queue";function a(e,n){return t=this,r=void 0,a=function(){var e,t,r,o;return function(e,n){var t,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(t)throw new TypeError("Generator is already executing.");for(;a;)try{if(t=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=n.call(e,a)}catch(e){i=[6,e],r=0}finally{t=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}}(this,(function(a){switch(a.label){case 0:return e=n.tab.id,[4,(u=i,new Promise((function(e){chrome.storage.sync.get(u,(function(n){return e(chrome.runtime.lastError?null:n[u]||null)}))})))];case 1:return t=a.sent()||[],r=t.findIndex((function(n){return n.tabId===e})),(o=t[r])&&function(e,n){return void 0===n&&(n={greeting:"",value:""}),new Promise((function(t){chrome.tabs.sendMessage(e,n,(function(e){return t(e)}))}))}(o.tabId,o.message).then((function(){t.splice(r,1),function(e,n){var t;chrome.storage.sync.set(((t={}).action_message_queue=n,t))}(0,t)})),[2]}var u}))},new((o=void 0)||(o=Promise))((function(e,n){function i(e){try{c(a.next(e))}catch(e){n(e)}}function u(e){try{c(a.throw(e))}catch(e){n(e)}}function c(n){var t;n.done?e(n.value):(t=n.value,t instanceof o?t:new o((function(e){e(t)}))).then(i,u)}c((a=a.apply(t,r||[])).next())}));var t,r,o,a}chrome.extension.onMessage.addListener((function(){var e=Array.prototype.slice.call(arguments),t=n[e[0].greeting];"function"==typeof t&&t.apply(void 0,e)}))})();